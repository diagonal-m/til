# 概念スキーマと論理設計

- 論理設計(概念スキーマ)とは
- 信頼性(可用性)・性能・キャパシティの要件を満たすためにどんな点に注意すべきか
- 各ステップの概要

---

- 概念スキーマを定義する設計を論理設計と呼ぶ
  - ここでいう論理→「物理層の制約にとらわれない」
    - DBサーバーのCPUパワー
    - ストレージ
    - データの格納場所
- システム開発におけるデータベース設計は以下の順番で行う
  1. 概念スキーマ(論理設計)
  2. 内部スキーマ(物理設計)
- 器を用意してから何の料理を作るか決めるのではなくて、料理に合わせて器を決める　



## 論理設計のステップ

1. エンティティの抽出
2. エンティティの定義
3. 正規化
4. ER図の作成

## エンティティの抽出

- **エンティティ**(entity)→「**実体**」：現実世界に存在するデータの集合体を表す

  - 顧客・社員・店舗・車
  - 税・会社・注文履歴

  → 「エンティティ(実体)」といっても、物理的実体を伴う必要はない

- RDBでは現実世界のエンティティを、最終的に「テーブル」という物理的単位で格納していく

- **システムのためにどのようなエンティティ(=データ)が必要になるかを抽出することが、論理設計の第１ステップ**

## エンティティの定義

- エンティティを抽出
  - 各エンティティがどのようなデータを保持するかを決める必要がある
- エンティティは、データを「**属性**(attribute)」という形で保持する
  - 二次元表における「列」
- RDBは、二次元表に近い「テーブル」というフォーマットでエンティティを保持する
  - 各表がどのような「列」を持つか、ということを定義するのがこの作業
- 重要なのは、「**キー**(key)」という列を定義すること
  - キーとは
    - ある特定の列の値を決定するための列(複数列でも可)のこと

## 正規化

- 正規化(normalization)
  - エンティティ(テーブル)について、システムでの利用がスムーズに行えるように整理する作業
  - 特に、正規化は更新(データの登録、変更、削除)が整合的に行えるように、エンティティのフォーマットを整理することが重要な目的

## ER図の作成

- **ER図**→Entity-Relationship Diagramの略

  - 正規化を行うと、エンティティの数が増える
  - 物理的な観点から見ると、正規化とは、エンティティ(=テーブル)を細かく分割していく作業

  → エンティティ同士の関係が把握しづらくなる

- エンティティ同士の関係を表現する図を作成する→エンティティの見取り図