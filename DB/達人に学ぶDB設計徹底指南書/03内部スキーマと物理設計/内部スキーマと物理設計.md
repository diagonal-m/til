# 内部スキーマと物理設計

- 各工程の概要
- 大切なこと

- 物理設計は、論理設計の結果を受けて、データを格納するための物理的な領域や格納方法を決める工程



## 物理設計のステップ

1. テーブル定義
2. インデックス定義
3. ハードウェアのサイジング
4. ストレージの冗長構成決定
5. ファイルの物理配置決定



## テーブル定義

- 論理設計で定義した概念スキーマをもとに、DBMS内部に格納するための「テーブル」の単位に変換
- 論理設計で作られるERモデルを「論理モデル」と呼ぶのに対し、
  - このフェーズで作られるモデルを「物理モデル」と呼ぶ



## インデックス定義

- インデックス(索引)は、リレーショナルデータベースにおいてテーブルと並んで重要な概念

- インデックスが重要な役割を果たすのは非機能の部分

  → パフォーマンス



## ハードウェアのサイジング

- 「サイジング」→「サイズ(大きさ)」に由来→「大きさを決める」という意味
- システム開発では二種類の意味で使う
  1. データの規模を問題にする場合
     - システムで利用するデータサイズを見積もり、それに十分な容量の記憶装置(ストレージ)を選定する
     - データのサイズが重要
  2. パフォーマンスに関して
     1. サイズを測る対象はサーバーのCPUやメモリ
     2. システムが十分な性能を発揮できるだけのスペックのCPUやメモリを持ったサーバーを選定する

> サイジングはキャパシティとパフォーマンスの２つの観点から行う

> データベースの性能問題の8割はディスクI/Oによって起きる

- データベースにおいては、データの整合性とパフォーマンスの間に強いトレードオフが存在する



#### パフォーマンスのサイジング

- 性能要件

  - システム開発では性能要件を二つの指標を使って定義する

    - 処理時間

      - 何秒以内に終了すること

    - スループット

      - どれだけたくさん処理できるか

      - 1秒あたりの仕事量→**TPS**

        性能要件の指標は二つ。「どれだけ速いか」と「どれだけ多いか」

    > 性能要件の指標は２つ。「どれだけ速いか」と「どれだけ多いか」

- リソース使用量の基礎数値

  - どの程度の処理を行うと、どの程度のハードウェアリソースを消費するのか
    - 方法１：類似の稼働中システムのデータを流用する
    - 方法２：開発の初期段階でプロトタイプシステムを構築して、性能検証を実施する